"use strict";const searchFilm=document.querySelector(".js_search-films"),button=document.querySelector(".js_button"),reset=document.querySelector(".js_reset"),films=document.querySelector(".js_films"),favoriteFilms=document.querySelector(".js_favorite-films"),defaultImage="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";let globalData=[],favorites=[];function getFilms(e){e.preventDefault();let i=searchFilm.value;fetch("//api.tvmaze.com/search/shows?q="+i).then(e=>e.json()).then(e=>{globalData=e,paintFilms(globalData)})}function paintFilms(){films.innerHTML="";for(let e of globalData){let i="";i=void 0===favorites.find(i=>i.show.id===e.show.id)?"":"favorito",null===e.show.image?films.innerHTML+=`<li id="${e.show.id}" class="js-list_item" ${i}"><div class="div_list"><h2 class="tittle_name">${e.show.name}</h2><img class= "image" src=${defaultImage} /></div></li>`:films.innerHTML+=`<li id="${e.show.id}" class="js-list_item ${i}"><div class="div_list"><h2 class="tittle_name">${e.show.name}</h2><img class="image" src="${e.show.image.medium}"/></div></li>`,listenCover()}}function listenCover(){const e=document.querySelectorAll(".js-list_item");for(let i of e)i.addEventListener("click",handleClickCover)}function handleClickCover(e){e.preventDefault();const i=parseInt(e.currentTarget.id),t=globalData.find(e=>e.show.id===i);void 0===favorites.find(e=>e.show.id===i)?favorites.push(t):favorites=favorites.filter(e=>e.show.id!==i),printFavorite(),paintFilms(),setLocalStorage(),resetIcon()}function printFavorite(){favoriteFilms.innerHTML="";for(const e of favorites)null===e.show.image?favoriteFilms.innerHTML+=`<li id="${e.show.id}" class="list__favoritos"><div class="div_favoritos"><h1 class="title_favoritos">${e.show.name}</h1><img class="img_favoritos" src=${defaultImage}/><i id="${e.show.id}"class="fas fa-times-circle remove_favorito"></i></div></li>`:favoriteFilms.innerHTML+=`<li item-id="${e.show.id}" class="list_favoritos"><div class="div_favoritos"><h1 class="title_favoritos">${e.show.name}</h1><img class="img_favoritos" src="${e.show.image.medium}"/><i id="${e.show.id}"class="fas fa-times-circle remove_favorito"></i></div></li>`}function setLocalStorage(){localStorage.setItem("favorites",JSON.stringify(favorites))}function savedFilms(){const e=JSON.parse(localStorage.getItem("favorites"));null!==e&&(favorites=e),printFavorite()}function resetFav(){favoriteFilms.innerHTML="",localStorage.removeItem("favorites"),paintFilms()}function resetIcon(){const e=document.querySelectorAll(".remove_favorito");for(let i of e)console.log(e),i.addEventListener("click",handleClickCover)}button.addEventListener("click",getFilms),savedFilms(),reset.addEventListener("click",resetFav);